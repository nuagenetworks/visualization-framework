{
    "id": "inf-regress-area-testsuite-table",
    "author": "Ronak Shah",
    "service": "elasticsearch",
    "tabify": "regressExtractRunLevel",
    "query": {
      "index": "nuage_regress",
      "type": "nuage_doc_type",
      "body": {
        "sort": [
          { "time_ran_at" : {"order" : "desc"}}
        ],
        "size": 100,
        "query": {
          "bool": {
            "must": [
              {
                "range":{
                  "time_ran_at":{
                    "gte":"{{testsuiteTime}}||",
                    "lte":"{{testsuiteTime}}||+1d",
                    "format":"epoch_millis"
                  }
                }
              }
            ],
            "must_not":{"term":{"testcase":""}},
            "filter": [
              {"term": { "testsuite": "{{testSuite}}"}},
              {"term": {"project": "{{branch}}"}},
              {
                "regexp":{
                  "version.vrs":"[0-9].[0-9]/[0-9.]+"
                }
              },
              {
                "regexp":{
                  "version.vsd":"[0-9].[0-9]/[0-9.]+"
                }
              },
              {
                "regexp":{
                  "version.vsc":"[0-9].[0-9]/[0-9ISBN.]+"
                }
              }
            ]
          }
        }
      }
    }
  }